<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Object Detector Rust üîç"><meta name="keywords" content="rust, rustlang, rust-lang, object_detector_rust"><title>object_detector_rust - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../static.files/rustdoc-6827029ac823cab7.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../static.files/light-ebce58d0a40c3431.css"><link rel="stylesheet" disabled href="../static.files/dark-f23faae4a2daf9a6.css"><link rel="stylesheet" disabled href="../static.files/ayu-8af5e100b21cd173.css"><script id="default-settings" ></script><script src="../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../crates.js"></script><script defer src="../static.files/main-c55e1eb52e1886b4.js"></script><noscript><link rel="stylesheet" href="../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod crate"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../object_detector_rust/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../object_detector_rust/index.html"><div class="logo-container"><img class="rust-logo" src="../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">Crate object_detector_rust</a></h2><div class="sidebar-elems"><ul class="block"><li class="version">Version 0.1.1</li><li><a id="all-types" href="all.html">All Items</a></li></ul><section><ul class="block"><li><a href="#modules">Modules</a></li></ul></section></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‚ÄòS‚Äô to search, ‚Äò?‚Äô for more options‚Ä¶" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Crate <a class="mod" href="#">object_detector_rust</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/object_detector_rust/lib.rs.html#1-48">source</a> ¬∑ <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><h2 id="object-detector-rust-"><a href="#object-detector-rust-">Object Detector Rust üîç</a></h2>
<p><a href="https://github.com/chriamue/object-detector-rust/"><img src="https://img.shields.io/badge/github-repo-green" alt="Github Repo" /></a>
<a href="https://codecov.io/gh/chriamue/object-detector-rust"><img src="https://codecov.io/gh/chriamue/object-detector-rust/branch/main/graph/badge.svg?token=RJ6T5D9DZT" alt="codecov" /></a>
<a href="https://opensource.org/licenses/MIT"><img src="https://img.shields.io/badge/License-MIT-yellow.svg" alt="License: MIT" /></a>
<a href="https://chriamue.github.io/object-detector-rust/object_detector_rust/"><img src="https://img.shields.io/badge/Docs-online-green.svg" alt="Docs" /></a></p>
<p>Object Detector Rust is a framework for detecting objects in images using feature-based algorithms. It includes implementations of the HOG and ORB algorithms, as well as functions for feature matching and object localization. The framework is written in Rust, a statically-typed, memory-safe language that can be compiled to WebAssembly for use in web browsers or other environments.</p>
<h3 id="features-"><a href="#features-">Features üí™</a></h3>
<ul>
<li>Object detection using HOG and ORB feature-based algorithms</li>
<li>Feature matching and object localization functions</li>
<li>Written in Rust, compiled to WebAssembly</li>
</ul>
<h3 id="architecture-"><a href="#architecture-">Architecture üß±</a></h3>
<p>The overall architecture of the Object Detector Rust system is shown in the following diagram:</p>
<p><img src="https://www.plantuml.com/plantuml/proxy?cache=no&amp;src=https://raw.github.com/chriamue/object-detector-rust/main/docs/object-detection-diagram.puml" alt="Object Detection Diagram" /></p>
<p>In this system, the input image is passed to the feature extractor, which extracts features from the image. The extracted features are then matched against features in a template image using a matcher. The matcher passes the locations of the matched features to a localizer, which determines the location of the object in the input image and annotates the image with a bounding box around the object.</p>
<h3 id="training-"><a href="#training-">Training üèãÔ∏è‚Äç‚ôÄÔ∏è</a></h3>
<p>To train a model for object detection, you will need a dataset of labeled images that includes examples of the objects you want to detect. You can use tools such as <a href="https://chriamue.github.io/image-label-tool/">Image Label Tool</a> to label your images.</p>
<p>Once you have collected and labeled your dataset, you can use image processing and machine learning libraries to extract features from the images and train a model using these features.</p>
<p>To train a model, you will need to:</p>
<ol>
<li>
<p>Load and preprocess the images in your dataset. You can use image processing libraries to load the images from files and apply any desired transformations, such as resizing or converting to grayscale.</p>
</li>
<li>
<p>Extract features from the images. You can use image processing libraries to extract features such as HOG, or ORB from the images.</p>
</li>
<li>
<p>Create a model using a machine learning library. You can choose a model that is suitable for object detection, such as an SVM classifier.</p>
</li>
<li>
<p>Train the model on the features using the <code>fit</code> method provided by the model.</p>
</li>
</ol>
<p><img src="https://www.plantuml.com/plantuml/proxy?cache=no&amp;src=https://raw.github.com/chriamue/object-detector-rust/main/docs/training.puml" alt="Training" /></p>
<h3 id="usage-"><a href="#usage-">Usage üìñ</a></h3>
<p>To use the Object Detector Rust library, you will need to add it to your project as a dependency. You can do this by adding the following to your <code>Cargo.toml</code> file:</p>
<div class="example-wrap"><pre class="language-toml"><code>[dependencies]
object-detector-rust = &quot;0.1&quot;
</code></pre></div>
<p>Then, use the crate in your Rust code:</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>object_detector_rust::prelude::<span class="kw-2">*</span>;

<span class="kw">fn </span>main() {
}</code></pre></div>
<p>You can then use the library to train and use a classifier or detector on your annotated images.</p>
<p>To train a classifier, you will need to create a <code>DataSet</code> object and populate it with annotated images. You can then create a <code>Classifier</code> object, such as a <code>BayesClassifier</code> or <code>SVMClassifier</code>, and pass it the <code>DataSet</code> object to train it.</p>

<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">use </span>image::DynamicImage;
<span class="kw">use </span>object_detector_rust::prelude::<span class="kw-2">*</span>;
<span class="kw">use </span>object_detector_rust::utils::extract_data;
<span class="kw">use </span>object_detector_rust::feature::HOGFeature;
<span class="comment">// Create a memory-based DataSet
</span><span class="kw">let </span><span class="kw-2">mut </span>dataset = MemoryDataSet::new();

<span class="comment">// Add some annotated images to the DataSet
</span>dataset.add_annotated_image(AnnotatedImage {
    image: DynamicImage::new_rgba8(<span class="number">128</span>, <span class="number">128</span>),
    annotations: <span class="macro">vec!</span>[Annotation {
        bbox: BBox { x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="number">32</span>, height: <span class="number">32 </span>},
        class: <span class="number">0</span>,
    }],
});
dataset.add_annotated_image(AnnotatedImage {
    image: DynamicImage::new_rgba8(<span class="number">128</span>, <span class="number">128</span>),
    annotations: <span class="macro">vec!</span>[Annotation {
        bbox: BBox { x: <span class="number">50</span>, y: <span class="number">50</span>, width: <span class="number">32</span>, height: <span class="number">32 </span>},
        class: <span class="number">1</span>,
    }],
});
<span class="kw">let </span>class = <span class="number">1</span>;
<span class="kw">let </span>feature = HOGFeature::default();
<span class="comment">// Create a BayesClassifier and train it on the DataSet
</span><span class="kw">let </span><span class="kw-2">mut </span>classifier = BayesClassifier::new();
<span class="kw">let </span>(x, y) = dataset.get_data();
<span class="kw">let </span>x: Vec&lt;Vec&lt;f32&gt;&gt; = x
        .iter()
        .map(|image| feature.extract(image).unwrap())
        .collect();
    <span class="kw">let </span>y = y
        .iter()
        .map(|y| <span class="kw">if </span><span class="kw-2">*</span>y == class { <span class="bool-val">true </span>} <span class="kw">else </span>{ <span class="bool-val">false </span>})
        .collect();
<span class="kw">let </span>(x, y) = extract_data(x, y);
classifier.fit(<span class="kw-2">&amp;</span>x.view(), <span class="kw-2">&amp;</span>y.view());</code></pre></div>
<p>To use a classifier to predict the class of an image, you can call the <code>predict</code> method on the classifier and pass it the image.</p>

<div class="example-wrap ignore"><div class='tooltip'>‚ìò</div><pre class="rust rust-example-rendered"><code><span class="kw">let </span>prediction = classifier.predict(<span class="kw-2">&amp;</span>image);</code></pre></div>
<p>To use a detector in Object Detector Rust, you will need to do the following:</p>
<ol>
<li>Create a <code>Detector</code> object. This can be done using one of the provided implementations, such as <code>HOGSVMDetector</code> or <code>BriefSVMDetector</code>, or by creating a custom implementation of the <code>Detector</code> trait.</li>
<li>Train the <code>Detector</code> object on a <code>DataSet</code> object. The <code>DataSet</code> trait includes methods for adding annotated images and iterating over them.</li>
<li>Use the Detector object‚Äôs detect method to detect objects in images and return their bounding boxes and class predictions.</li>
</ol>
<p>For example:</p>

<div class="example-wrap ignore"><div class='tooltip'>‚ìò</div><pre class="rust rust-example-rendered"><code><span class="kw">use </span>object_detector_rust::prelude::{DataSet, Detector, HOGSVMDetector};

<span class="comment">// Create a HOGSVMDetector object
</span><span class="kw">let </span><span class="kw-2">mut </span>detector = HOGSVMDetector::new();

<span class="comment">// Create a DataSet object and add some annotated images to it
</span><span class="kw">let </span><span class="kw-2">mut </span>dataset = MemoryDataSet::new();
dataset.add_annotated_image(annotated_image_1);
dataset.add_annotated_image(annotated_image_2);

<span class="comment">// Train the detector on the dataset
</span>detector.train(<span class="kw-2">&amp;</span>dataset);

<span class="comment">// Use the detector to detect objects in an image
</span><span class="kw">let </span>detections = detector.detect(<span class="kw-2">&amp;</span>image);</code></pre></div>
<h3 id="building-and-testing-"><a href="#building-and-testing-">Building and Testing üõ†Ô∏è</a></h3>
<p>To build the Object Detector Rust crate, run <code>cargo build</code> from the command line. To run the unit tests, use <code>cargo test</code>.</p>
<h3 id="running-benchmarks-"><a href="#running-benchmarks-">Running Benchmarks üèãÔ∏è‚Äç‚ôÄÔ∏è</a></h3>
<p>To run the benchmarks for the Object Detector Rust crate, use the cargo bench command. This will run all the benchmarks defined in the benches directory.</p>
<p>You can also run a specific benchmark by specifying its name, like this:</p>
<div class="example-wrap"><pre class="language-sh"><code>cargo bench
</code></pre></div>
<p>If you want to see the output of the benchmarks as they are running, you can use the ‚Äìverbose flag:</p>
<div class="example-wrap"><pre class="language-sh"><code>cargo bench --verbose
</code></pre></div><h3 id="orb-support-"><a href="#orb-support-">ORB Support üöß</a></h3>
<p>ORB support is currently planned, but not yet implemented. Stay tuned for updates!</p>
<h3 id="contributing-"><a href="#contributing-">Contributing üôè</a></h3>
<p>We welcome contributions to Object Detector Rust! If you have a bug fix or feature you would like to add, please open a pull request.</p>
<h3 id="license-"><a href="#license-">License üìú</a></h3>
<p>Object Detector Rust is licensed under the <a href="https://github.com/chriamue/object-detector-rust/blob/main/LICENSE">MIT License</a>.</p>
<h3 id="note-"><a href="#note-">Note üìù</a></h3>
<p>This project is a remake of <a href="https://github.com/chriamue/hog-detector">Hog Detector</a>.
It was made with assistance of chatgpt.
Find the dialog <a href="https://github.com/chriamue/object-detector-rust/blob/main/transcript.md">here</a>.</p>
</div></details><h2 id="modules" class="small-section-header"><a href="#modules">Modules</a></h2><div class="item-table"><div class="item-row"><div class="item-left module-item"><a class="mod" href="bbox/index.html" title="object_detector_rust::bbox mod">bbox</a></div><div class="item-right docblock-short">This module contains the <code>BBox</code> struct for representing bounding boxes and functions for calculating overlap and union.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="classifier/index.html" title="object_detector_rust::classifier mod">classifier</a></div><div class="item-right docblock-short">The classifier module provides traits and implementations for object classification algorithms.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="dataset/index.html" title="object_detector_rust::dataset mod">dataset</a></div><div class="item-right docblock-short">This module contains the <code>DataSet</code> trait for representing datasets of images and labels for training.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="detection/index.html" title="object_detector_rust::detection mod">detection</a></div><div class="item-right docblock-short">Struct for representing a detected object</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="detector/index.html" title="object_detector_rust::detector mod">detector</a></div><div class="item-right docblock-short">A trait for object detectors</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="feature/index.html" title="object_detector_rust::feature mod">feature</a></div><div class="item-right docblock-short">This module contains traits and structs for feature descriptors that can be extracted from images.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="predictable/index.html" title="object_detector_rust::predictable mod">predictable</a></div><div class="item-right docblock-short">Trait for objects that can make predictions</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="prelude/index.html" title="object_detector_rust::prelude mod">prelude</a></div><div class="item-right docblock-short">the object-detector-rust prelude</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="tests/index.html" title="object_detector_rust::tests mod">tests</a></div><div class="item-right docblock-short">some structs and functions usable for tests</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="trainable/index.html" title="object_detector_rust::trainable mod">trainable</a></div><div class="item-right docblock-short">Trait for objects that can be trained</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="types/index.html" title="object_detector_rust::types mod">types</a></div><div class="item-right docblock-short">The types module contains types for representing annotations and annotated images.</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="utils/index.html" title="object_detector_rust::utils mod">utils</a></div><div class="item-right docblock-short">Utility functions for working with images</div></div><div class="item-row"><div class="item-left module-item"><a class="mod" href="window_generator/index.html" title="object_detector_rust::window_generator mod">window_generator</a></div><div class="item-right docblock-short">The module for different window generators.</div></div></div></section></div></main><div id="rustdoc-vars" data-root-path="../" data-static-root-path="../static.files/" data-current-crate="object_detector_rust" data-themes="" data-resource-suffix="" data-rustdoc-version="1.67.1 (d5a82bbd2 2023-02-07)" data-search-js="search-444266647c4dba98.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-af96d9e2fc13e081.css" ></div></body></html>